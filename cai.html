<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
        <meta name="format-detection" content="telephone=no">
        <title>cai</title>
        <script src="deps/zepto.min.js"></script>
        <link href="src/css/reset.css" type="text/css" rel="stylesheet"/>
        <link href="src/css/dian.css" type="text/css" rel="stylesheet"/>
    </head>
    <body>
        <section id="carousel">
            <ul class="carousel-inner">
                <li class="carousel-active" draggable="true" data-id="1">
                    <img src="http://dummyimage.com/200x150/888/fff" />
                </li>
                <li class="carousel-next" draggable="true" style="">
                    <img src="http://dummyimage.com/200x150/888/fff" />
                </li>
                <li class="" draggable="true">
                    <img src="http://dummyimage.com/200x150/ccc/fff" />
                </li>
                <li draggable="true">
                    <img src="http://dummyimage.com/200x150/000/fff" />
                </li>
                <li draggable="true">
                    <img src="http://dummyimage.com/200x150/888/fff" />
                </li>
            </ul>
        </section>
        <script>
            var x = 320 / 2 - 200 / 2;
            $('.carousel-inner li').each(function(index, li) {
                $(li).data('data-index', index);
            });
            var inner = $('.carousel-inner');
            $('#carousel li').on('click', function(event) {
                var target = $(this);
                if(!(target.hasClass('carousel-prev') || target.hasClass('carousel-next'))) {
                    return;
                }

                var active = $('.carousel-active');

                var index = target.data('data-index');
                index = parseInt(index);
                var currentIndex = active.data('data-index');
                currentIndex = parseInt(currentIndex);

                var position = inner.position();
                var left = position.left;

                if(index > currentIndex) {
                    // 后面一张图片
                    inner.css('-webkit-transform', 'translate3d(' + (left - 50) + 'px,0,0)');
                    target.removeClass().addClass('carousel-active');
                    target.next().removeClass().addClass('carousel-next');
                    target.next().next().removeClass().addClass('carousel-last');
                    active.removeClass().addClass('carousel-prev');
                    active.prev().removeClass().addClass('carousel-first');
                    active.prev().prev().removeClass();
                } else {
                    // 前面一张图片
                    inner.css('-webkit-transform', 'translate3d(' + (left + 50) + 'px,0,0)');
                    target.removeClass().addClass('carousel-active');
                    target.prev().removeClass().addClass('carousel-prev');
                    target.prev().prev().removeClass().addClass('carousel-fisrst');
                    active.removeClass().addClass('carousel-next');
                    active.next().removeClass().addClass('carousel-last');
                    active.next().next().removeClass();
                }

            });
        </script>
    </body>
</html>
